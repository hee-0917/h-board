# 병원 직원 전용 게시판 PRD (Product Requirements Document)

## 🏥 프로젝트 개요

### 프로젝트명
병원 직원 전용 게시판 시스템 (Hospital Staff Bulletin Board System)

### 비전
병원 내 모든 직원이 안전하고 효율적으로 소통할
 수 있는 디지털 플랫폼을 제공하여, 중요한 공지사항의 신속한 전달과 부서별 협업을 강화한다.

### 목표
- 전체 직원 및 부서별 공지사항의 체계적 관리
- 실시간 모바일 푸시 알림을 통한 긴급 공지 전달
- 사번 기반 인증을 통한 보안성 확보
- 직관적이고 사용하기 쉬운 인터페이스 제공

## 🛠 기술 스택

### Frontend
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **UI Components**: Shadcn/ui
- **State Management**: Zustand
- **Authentication**: Supabase Auth

### Backend
- **Database**: Supabase (PostgreSQL)
- **API**: Supabase REST API
- **Real-time**: Supabase Realtime
- **Authentication**: Supabase Auth
- **File Storage**: Supabase Storage

### 모바일 알림
- **Push Notifications**: Firebase Cloud Messaging (FCM)
- **Progressive Web App**: PWA 기능 활용

### 개발 도구
- **IDE**: Cursor AI
- **Version Control**: Git
- **Deployment**: Vercel
- **Monitoring**: Sentry

## 🗃 데이터베이스 스키마 설계

### 주요 테이블 구조

#### 1. 직원 테이블 (employees)
```sql
- id: UUID (Primary Key)
- employee_id: VARCHAR(20) (사번, Unique)
- name: VARCHAR(100) (이름)
- email: VARCHAR(255) (이메일)
- password_hash: VARCHAR(255) (암호화된 비밀번호)
- department_id: UUID (부서 ID, Foreign Key)
- position: VARCHAR(100) (직책)
- phone: VARCHAR(20) (연락처)
- is_active: BOOLEAN (활성 상태)
- created_at: TIMESTAMP
- updated_at: TIMESTAMP
```

#### 2. 부서 테이블 (departments)
```sql
- id: UUID (Primary Key)
- name: VARCHAR(100) (부서명)
- code: VARCHAR(20) (부서 코드)
- description: TEXT (부서 설명)
- manager_id: UUID (부서장 ID)
- created_at: TIMESTAMP
- updated_at: TIMESTAMP
```

#### 3. 게시글 테이블 (posts)
```sql
- id: UUID (Primary Key)
- title: VARCHAR(255) (제목)
- content: TEXT (내용)
- author_id: UUID (작성자 ID, Foreign Key)
- post_type: ENUM('ALL', 'DEPARTMENT') (전체/부서별)
- department_id: UUID (부서 ID, nullable)
- is_urgent: BOOLEAN (긴급 여부)
- is_pinned: BOOLEAN (고정 여부)
- attachments: JSONB (첨부파일 정보)
- view_count: INTEGER (조회수)
- created_at: TIMESTAMP
- updated_at: TIMESTAMP
```

#### 4. 알림 테이블 (notifications)
```sql
- id: UUID (Primary Key)
- user_id: UUID (수신자 ID, Foreign Key)
- post_id: UUID (게시글 ID, Foreign Key)
- message: TEXT (알림 메시지)
- is_read: BOOLEAN (읽음 여부)
- notification_type: ENUM('POST', 'URGENT', 'MENTION')
- created_at: TIMESTAMP
```

#### 5. 푸시 토큰 테이블 (push_tokens)
```sql
- id: UUID (Primary Key)
- user_id: UUID (사용자 ID, Foreign Key)
- token: VARCHAR(255) (FCM 토큰)
- device_type: ENUM('WEB', 'ANDROID', 'IOS')
- is_active: BOOLEAN
- created_at: TIMESTAMP
- updated_at: TIMESTAMP
```

## ⚡ 주요 기능 명세서

### 1. 인증 및 사용자 관리
#### 1.1 로그인/로그아웃
- **사번 + 비밀번호** 기반 인증
- 세션 관리 및 자동 로그아웃 (8시간)
- 비밀번호 찾기/변경 기능
- 2단계 인증 (선택사항)

#### 1.2 사용자 프로필 관리
- 개인정보 조회/수정
- 비밀번호 변경
- 알림 설정 관리

### 2. 게시판 기능
#### 2.1 게시글 작성/수정/삭제
- **전체 공지**: 모든 직원 대상
- **부서별 공지**: 특정 부서 직원만 대상
- 긴급 공지 마킹 기능
- 게시글 고정 기능 (관리자)
- 첨부파일 업로드 (이미지, 문서)
- 게시글 예약 발행

#### 2.2 게시글 조회
- 게시판별 목록 조회
- 검색 기능 (제목, 내용, 작성자)
- 필터링 (긴급, 부서별, 날짜별)
- 페이징 처리
- 조회수 카운팅

#### 2.3 권한 관리
- **일반 직원**: 게시글 조회, 본인 게시글 작성/수정/삭제
- **부서장**: 부서별 공지 작성, 부서원 게시글 관리
- **관리자**: 전체 공지 작성, 모든 게시글 관리

### 3. 검색 및 필터링
- 통합 검색 (제목, 내용, 작성자)
- 고급 검색 (날짜 범위, 부서, 긴급 여부)
- 태그 기반 분류
- 즐겨찾기 기능

### 4. 대시보드
#### 4.1 메인 대시보드
- 최신 전체 공지 (최대 5개)
- 최신 부서별 공지 (최대 5개)
- 긴급 공지 우선 표시
- 읽지 않은 알림 표시

#### 4.2 통계 대시보드 (관리자)
- 게시글 작성 현황
- 사용자 활동 통계
- 부서별 활동 현황

## 🔔 알림 시스템 설계

### 1. 푸시 알림 트리거 조건
#### 1.1 긴급 전체 공지
- **대상**: 모든 활성 직원
- **즉시 발송**: 게시글 작성 후 1분 이내
- **알림 형태**: "🚨 긴급 전체 공지: [제목]"

#### 1.2 긴급 부서별 공지
- **대상**: 해당 부서 직원만
- **즉시 발송**: 게시글 작성 후 1분 이내
- **알림 형태**: "🚨 긴급 부서 공지: [제목]"

#### 1.3 일반 공지
- **대상**: 해당 범위 직원
- **발송 시점**: 근무시간 내 (오전 8시~오후 6시)
- **알림 형태**: "📢 새로운 공지: [제목]"

### 2. 알림 설정 옵션
#### 2.1 사용자별 알림 설정
- 전체 공지 알림 ON/OFF
- 부서별 공지 알림 ON/OFF
- 긴급 공지 알림 (항상 ON, 변경 불가)
- 근무시간 외 알림 수신 여부
- 알림음 설정

#### 2.2 관리자 알림 설정
- 대량 알림 발송 시 확인 절차
- 알림 발송 실패 시 재시도 로직
- 알림 발송 통계 확인

### 3. 알림 구현 방식
#### 3.1 웹 푸시 알림
- Service Worker를 통한 브라우저 푸시
- FCM(Firebase Cloud Messaging) 활용
- 오프라인 상태에서도 알림 수신

#### 3.2 인앱 알림
- 실시간 알림 벨 아이콘
- 읽지 않은 알림 개수 표시
- 알림 목록 및 상세 보기

#### 3.3 이메일 백업 알림
- 긴급 공지 시 이메일 동시 발송
- 알림 수신 실패 시 이메일 백업

## 🎨 UI/UX 와이어프레임 설계

### 1. 레이아웃 구조
#### 1.1 헤더 영역
- 병원 로고 및 시스템 명
- 사용자 정보 (이름, 부서)
- 알림 벨 아이콘 (읽지 않은 알림 개수 표시)
- 로그아웃 버튼

#### 1.2 사이드바 네비게이션
- 🏠 대시보드
- 📢 전체 공지
- 🏢 부서별 공지
- ✏️ 게시글 작성
- 🔍 검색
- ⚙️ 설정 (프로필, 알림 설정)
- 👑 관리자 메뉴 (권한별 표시)

#### 1.3 메인 콘텐츠 영역
- 반응형 그리드 레이아웃
- 카드 기반 UI 디자인
- 무한 스크롤 또는 페이지네이션

### 2. 주요 화면 설계
#### 2.1 로그인 화면
```
┌─────────────────────────────────┐
│        🏥 [병원명] 직원 게시판        │
├─────────────────────────────────┤
│                                 │
│    📋 사번: [_____________]      │
│    🔒 비밀번호: [_____________]   │
│                                 │
│         [로그인] [비밀번호 찾기]     │
│                                 │
└─────────────────────────────────┘
```

#### 2.2 대시보드 화면
```
┌──────────────────────────────────────────┐
│ Header: 로고 | 사용자명 | 🔔(3) | 로그아웃  │
├──────────────────────────────────────────┤
│ Side │                                   │
│ Nav  │    📊 대시보드                     │
│      │                                   │
│ 🏠   │ ⚡ 긴급 공지                        │
│ 📢   │ ┌─────────────────────────────────┐ │
│ 🏢   │ │ 🚨 [긴급] 코로나19 방역 지침 변경  │ │
│ ✏️   │ │    의료진 전체 - 2시간 전         │ │
│ 🔍   │ └─────────────────────────────────┘ │
│ ⚙️   │                                   │
│      │ 📝 최신 전체 공지                   │
│      │ ┌─────────────────────────────────┐ │
│      │ │ 📋 12월 직원 교육 일정 안내       │ │
│      │ │    인사팀 - 1일 전               │ │
│      │ └─────────────────────────────────┘ │
│      │                                   │
│      │ 🏢 최신 부서별 공지                 │
│      │ ┌─────────────────────────────────┐ │
│      │ │ 💊 신약 입고 현황 공유           │ │
│      │ │    약제팀 - 3시간 전             │ │
│      │ └─────────────────────────────────┘ │
└──────────────────────────────────────────┘
```

#### 2.3 게시글 목록 화면
```
┌──────────────────────────────────────────┐
│                전체 공지                   │
├──────────────────────────────────────────┤
│ 🔍 검색: [____________] [검색] [필터]      │
├──────────────────────────────────────────┤
│ 📌 [고정] 병원 내 마스크 착용 의무화       │
│    관리자 | 2023.12.01 | 조회 247         │
├──────────────────────────────────────────┤
│ 🚨 [긴급] 응급실 운영 시간 변경 안내       │
│    의료진팀 | 2023.12.02 | 조회 156       │
├──────────────────────────────────────────┤
│ 📋 연말 휴가 신청 기간 안내               │
│    인사팀 | 2023.12.02 | 조회 89          │
├──────────────────────────────────────────┤
│              [더 보기]                    │
└──────────────────────────────────────────┘
```

### 3. 모바일 최적화
- 반응형 디자인 (Mobile First)
- 터치 친화적인 버튼 크기 (최소 44px)
- 스와이프 제스처 지원
- PWA 기능으로 앱처럼 사용 가능

## 🔐 보안 요구사항

### 1. 인증 보안
#### 1.1 비밀번호 정책
- 최소 8자 이상, 대소문자+숫자+특수문자 조합
- 90일마다 비밀번호 변경 권고
- 최근 5개 비밀번호 재사용 금지
- 5회 로그인 실패 시 계정 잠금 (30분)

#### 1.2 세션 관리
- JWT 토큰 기반 인증
- 액세스 토큰 만료 시간: 1시간
- 리프레시 토큰 만료 시간: 7일
- 동시 로그인 세션 제한: 3개

### 2. 데이터 보안
#### 2.1 데이터 암호화
- 개인정보 필드 AES-256 암호화
- 데이터베이스 연결 SSL/TLS 강제
- 첨부파일 바이러스 스캔

#### 2.2 접근 제어
- Role-Based Access Control (RBAC)
- Row Level Security (RLS) 정책 적용
- API Rate Limiting (100 req/min per user)

### 3. 운영 보안
#### 3.1 로깅 및 모니터링
- 모든 사용자 활동 로그 기록
- 로그인/로그아웃 이벤트 추적
- 의심스러운 활동 실시간 감지

#### 3.2 데이터 백업
- 일일 자동 백업
- 30일 백업 보관 정책
- 백업 데이터 암호화 저장

### 4. 컴플라이언스
- 개인정보보호법 준수
- 의료법 관련 데이터 처리 기준 준수
- GDPR 준수 (해외 직원 있을 경우)

## 📅 개발 일정 및 마일스톤

### Phase 1: 기반 구축 (2주)
- Supabase 프로젝트 설정 및 데이터베이스 스키마 구성
- Next.js 프로젝트 초기화 및 기본 UI 컴포넌트 개발
- 인증 시스템 구현 (사번 기반 로그인)

### Phase 2: 핵심 기능 개발 (3주)
- 게시판 CRUD 기능 구현
- 전체/부서별 공지 분리 로직
- 게시글 목록 및 상세 페이지
- 기본적인 권한 관리 시스템

### Phase 3: 알림 시스템 (2주)
- FCM 통합 및 푸시 알림 구현
- 실시간 알림 기능 (Supabase Realtime)
- 알림 설정 페이지
- 이메일 백업 알림

### Phase 4: UI/UX 완성 (1주)
- 반응형 디자인 적용
- 모바일 최적화
- PWA 기능 추가
- 접근성 개선

### Phase 5: 테스트 및 배포 (1주)
- 통합 테스트 및 버그 수정
- 보안 취약점 점검
- 성능 최적화
- 프로덕션 배포

## 🎯 성공 지표 (KPI)

### 1. 사용성 지표
- **일일 활성 사용자 (DAU)**: 전체 직원의 80% 이상
- **게시글 조회 시간**: 평균 10초 이내
- **알림 확인율**: 긴급 공지 95% 이상

### 2. 기술적 지표
- **시스템 가용성**: 99.9% 이상
- **페이지 로딩 시간**: 3초 이내
- **모바일 성능**: Lighthouse 점수 90점 이상

### 3. 비즈니스 지표
- **공지 전달율**: 98% 이상
- **사용자 만족도**: 4.5/5.0 이상
- **시스템 도입 후 업무 효율성**: 30% 향상

## 🔮 향후 확장 계획

### 단기 확장 (3-6개월)
- 댓글 및 좋아요 기능
- 파일 공유 시스템 확장
- 다국어 지원 (외국인 직원 대상)

### 중기 확장 (6-12개월)
- 화상회의 연동
- 업무 스케줄러 통합
- AI 기반 자동 분류

### 장기 확장 (1년 이후)
- 다른 병원 시스템과의 연동
- 모바일 앱 개발
- 고급 분석 및 리포팅

---

## 📋 결론

이 PRD는 병원 직원들의 효율적인 소통을 위한 종합적인 디지털 플랫폼 구축을 위한 로드맵을 제시합니다. Cursor AI와 Supabase를 활용하여 **9주 내 완성 가능한 현실적인 계획**이며, 보안성과 사용성을 모두 고려한 설계입니다.

특히 **긴급 알림 시스템**과 **부서별 권한 관리**를 통해 병원 특성에 최적화된 솔루션을 제공하며, 향후 확장 가능성도 충분히 고려하였습니다.

개발 진행 중 궁금한 사항이나 추가 요구사항이 있으시면 언제든 말씀해 주세요! 🚀
