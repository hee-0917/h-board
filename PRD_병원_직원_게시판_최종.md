# 🏥 **병원 직원 게시판 - 제품 요구사항 명세서 (PRD)**

---

## 📋 **프로젝트 개요**

병원 직원 게시판은 병원 내 208명의 직원들이 효율적으로 소통하고 중요한 공지사항을 빠짐없이 확인할 수 있도록 지원하는 웹 기반 게시판 시스템입니다. 기존의 비효율적인 공지 전달 방식을 개선하여, 전체 공지와 부서별 공지를 체계적으로 관리하고, 각 직원의 확인 여부를 실시간으로 추적할 수 있는 통합 플랫폼을 제공합니다. Excel 파일을 통한 대량 직원 등록, 권한 기반 접근 제어, 그리고 직관적인 사용자 인터페이스를 통해 병원 운영의 효율성을 크게 향상시킵니다.

---

## 👥 **핵심 사용자 스토리 (User Stories)**

### **🔐 인증 및 사용자 관리**
- **일반 직원**은 자신의 사번과 비밀번호로 로그인하여 시스템에 접근할 수 있다
- **관리자**는 Excel 파일을 업로드하여 여러 명의 직원을 한 번에 등록할 수 있다
- **시스템관리자(사번 9999)**는 모든 기능에 접근하여 시스템을 관리할 수 있다

### **📝 게시글 관리**
- **부서 관리자**는 자신의 부서 직원들에게만 보이는 부서별 공지를 작성할 수 있다
- **슈퍼 관리자**는 모든 직원에게 보이는 전체 공지를 작성할 수 있다
- **모든 직원**은 자신에게 해당하는 공지사항을 조회하고 내용을 확인할 수 있다
- **작성자 및 관리자**는 필요시 게시글을 삭제할 수 있다

### **✅ 확인 시스템**
- **일반 직원**은 중요한 공지사항을 읽고 "확인" 버튼을 눌러 확인 완료 상태로 표시할 수 있다
- **관리자**는 특정 공지사항에 대해 누가 확인했는지, 언제 확인했는지 실시간으로 조회할 수 있다
- **관리자**는 미확인자 현황을 파악하여 추가 알림이나 조치를 취할 수 있다

### **🎛️ 관리 기능**
- **관리자**는 관리자 모드로 전환하여 직원 관리, 게시글 관리 등의 관리 기능에 접근할 수 있다
- **시스템관리자**는 모든 부서의 게시글을 삭제하여 시스템을 정리할 수 있다

---

## 🛠️ **최종 기능 명세**

### **(1) 인증 및 사용자 관리**
- **자체 인증 시스템**: Supabase Auth 대신 bcrypt 암호화를 사용한 사번 기반 로그인
- **Excel 기반 대량 등록**: 사번, 이름, 소속, 권한레벨 4개 컬럼으로 구성된 Excel 파일 업로드
- **4단계 권한 체계**: USER(일반직원) → MODERATOR(게시판관리자) → DEPARTMENT_ADMIN(부서관리자) → SUPER_ADMIN(슈퍼관리자)
- **26개 부서 지원**: 5층상급부터 통합진료실까지 병원의 모든 부서 관리
- **자동 이메일 생성**: {사번}@hospital.com 형식으로 이메일 자동 할당
- **기본 비밀번호**: 모든 직원 초기 비밀번호 '1234' 설정

### **(2) 게시글 작성 및 관리**
- **이중 공지 체계**: 전체 공지(모든 직원 대상)와 부서별 공지(해당 부서만 대상) 분리
- **게시글 우선순위**: 고정글 → 긴급글 → 일반글 순서로 자동 정렬
- **첨부파일 지원**: 이미지, PDF, 문서 파일 등 첨부 가능
- **실시간 대상자 수 표시**: 부서별 공지 작성 시 해당 부서 직원 수 실시간 계산
- **권한 기반 작성 제한**: 일반 직원은 작성 불가, 관리자만 공지 작성 가능
- **Markdown 지원**: 서식이 있는 공지사항 작성 가능

### **(3) 게시글 조회 및 검색**
- **분리된 조회 페이지**: 전체 공지 페이지와 부서별 공지 페이지 독립 운영
- **실시간 부서명 표시**: 부서 ID 대신 실제 부서명으로 표시
- **통합 검색 기능**: 제목, 내용, 작성자명으로 검색 가능
- **조회수 자동 증가**: 게시글 열람 시 조회수 자동 카운트
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 모든 환경 지원

### **(4) 게시글 상세보기 및 확인 시스템**
- **상세 정보 표시**: 제목, 내용, 작성자, 작성일시, 첨부파일, 조회수 표시
- **1회 확인 제한**: 중복 확인 방지로 정확한 확인 현황 파악
- **실시간 확인자 목록**: 확인한 직원의 이름, 부서, 사번, 확인 시간 표시
- **확인 상태 토글**: "확인하기" ↔ "✓ 확인완료" 버튼 상태 변경
- **확인자 수 실시간 표시**: "👥 확인자 (X명)" 형태로 현황 표시

### **(5) 삭제 및 권한 관리**
- **계층적 삭제 권한**: 작성자 본인 > 부서관리자(해당 부서) > 슈퍼관리자(모든 게시글)
- **시스템관리자 특권**: 사번 9999는 모든 게시글 삭제 가능
- **삭제 확인 모달**: "되돌릴 수 없습니다" 경고와 함께 2단계 확인
- **연관 데이터 정리**: 게시글 삭제 시 확인 기록도 함께 삭제
- **안전한 삭제**: 외래키 제약 조건 해결 후 순차적 삭제

### **(6) 관리자 전용 기능**
- **관리자 모드 토글**: 일반 모드 ↔ 관리자 모드 전환 기능
- **Excel 템플릿 제공**: 부서명 목록이 포함된 업로드용 템플릿 다운로드
- **직원 목록 관리**: 등록된 모든 직원의 정보 조회 및 관리
- **부서별 통계**: 각 부서별 직원 수 실시간 집계
- **일괄 처리**: 208명 직원 정보 한 번에 업로드 및 검증

### **(7) 사용자 인터페이스**
- **통합 대시보드**: 최근 공지사항, 빠른 접근 메뉴, 권한별 메뉴 표시
- **공통 헤더**: 사용자명, 실제 부서명, 권한 표시, 로그아웃 기능
- **사이드바 네비게이션**: 주요 기능별 메뉴 구성
- **한국어 완전 지원**: 모든 UI 요소 한국어 지원
- **접근성 고려**: 직관적인 아이콘과 명확한 버튼 텍스트

---

## 💻 **기술 스택 (Tech Stack)**

### **Frontend**
- **Next.js 15.5.2**: React 기반 풀스택 프레임워크
- **TypeScript**: 정적 타입 지원으로 안정성 향상
- **Tailwind CSS**: 유틸리티 우선 CSS 프레임워크
- **Zustand**: 경량 상태 관리 라이브러리

### **Backend & Database**
- **Supabase**: PostgreSQL 기반 BaaS (Backend as a Service)
- **Next.js API Routes**: 서버사이드 API 엔드포인트
- **PostgreSQL**: 관계형 데이터베이스 (Supabase 제공)

### **Authentication & Security**
- **bcryptjs**: 비밀번호 해싱 라이브러리
- **Custom JWT**: 자체 구현 토큰 기반 인증
- **Row Level Security (RLS)**: Supabase 보안 정책

### **File Processing**
- **xlsx**: Excel 파일 읽기/쓰기 라이브러리
- **File API**: 브라우저 파일 업로드 처리

### **Development & Deployment**
- **ESLint**: 코드 품질 관리
- **Prettier**: 코드 포맷팅
- **Git**: 버전 관리

---

## ❌ **제외된 기능**

### **(1) Supabase Auth 사용**
- **제외 이유**: 병원의 기존 사번 체계와 호환성 문제
- **대안**: bcrypt 기반 자체 인증 시스템 구현

### **(2) 실시간 알림 시스템**
- **제외 이유**: 개발 복잡도 대비 우선순위 낮음
- **현재 상태**: 페이지 새로고침을 통한 수동 업데이트

### **(3) 게시글 수정 기능**
- **제외 이유**: 공지사항의 무결성 유지를 위해 의도적 제외
- **대안**: 삭제 후 재작성으로 수정 대체

### **(4) 복잡한 파일 첨부 시스템**
- **제외 이유**: 개발 시간 단축을 위해 기본 첨부 기능만 구현
- **현재 상태**: 파일 업로드 UI는 구현되었으나 실제 저장 기능 미완성

### **(5) 이메일/SMS 자동 알림**
- **제외 이유**: 외부 서비스 연동의 복잡성과 비용 문제
- **대안**: 웹 기반 확인 시스템으로 대체

### **(6) 댓글 시스템**
- **제외 이유**: 공지사항의 일방향성 유지가 목적
- **정책**: 공지는 전달 목적이므로 피드백 기능 불필요

---

## 📊 **프로젝트 현황**

### **개발 완료 현황**
- **핵심 기능**: 100% 구현 완료
- **등록 직원**: 208명 완료
- **지원 부서**: 26개 부서 모두 등록
- **테스트 게시글**: 9개 작성 완료

### **주요 테스트 계정**
- **시스템관리자**: 사번 9999 (이정희) / 비밀번호 1234
- **부서관리자**: 사번 1319 (이정희, 예약,콜,고객관리) / 비밀번호 1234
- **일반 직원**: 모든 사번 / 비밀번호 1234

### **지원 부서 목록 (26개)**
```
5층상급, 5층통합, 6층통합, SEROUM, 감염관리실, 건강증진센터, 
내시경센터, 대외협력본부, 마케팅, 방사선실, 법인사무국, 수술실, 
시설관리, 시스템관리자, 심사, 약제과, 예약,콜,고객관리, 외래, 
원무, 의국, 의국지원, 임상병리실, 장애인스포츠단, 전산, 
진료협력센터, 통합진료실
```

### **데이터베이스 구조**
```sql
-- 핵심 테이블
employees (직원 정보) - 208명 등록 완료
departments (부서 정보) - 26개 부서 등록 완료  
posts (게시글) - 9개 테스트 게시글
post_confirmations (확인 기록) - 실시간 확인 추적
```

---

**프로젝트 완료일**: 2024년 9월 8일  
**개발 기간**: 약 1주일  
**개발자**: AI Assistant와 사용자 협업  
**배포 상태**: 즉시 운영 가능  
**유지보수**: 필요시 기능 추가 및 개선 가능

---

## 🎯 **향후 개선 가능 사항**

### **단기 개선 (1개월 내)**
- 첨부파일 실제 저장 기능 완성
- 게시글 수정 기능 추가 (필요시)
- 사용자 프로필 관리 기능

### **중장기 개선 (3-6개월)**
- 이메일 자동 알림 시스템
- 모바일 앱 개발
- 고급 통계 및 리포트 기능
- 다국어 지원 (영어 등)

### **운영 개선**
- 정기적인 데이터 백업
- 보안 강화 (2FA 등)
- 성능 최적화
- 사용자 교육 및 매뉴얼 제작

---

*이 문서는 병원 직원 게시판 프로젝트의 최종 제품 요구사항 명세서입니다. 
실제 개발된 기능과 테스트 완료된 내용을 바탕으로 작성되었습니다.*
